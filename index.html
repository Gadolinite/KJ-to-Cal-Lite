<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Energy Converter</title>
    
    <!-- PWA Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Energy">
    <meta name="theme-color" content="#FF6B6B">
    
    <!-- Links to Local Assets -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="app-icon.svg">
    <link rel="apple-touch-icon" href="app-icon.svg">

    <style>
        /* 1. RESET & BASICS */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body {
            /* System Font Stack - Fast and Native looking on every device */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            /* The Gradient */
            background: linear-gradient(135deg, #fb923c, #f87171, #ec4899);
            color: #334155;
            overflow: hidden;
        }

        /* 2. THE GLASS CARD */
        .card {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            width: 100%;
            max-width: 360px;
            margin: 20px;
            padding: 24px;
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            position: relative;
        }

        /* 3. TYPOGRAPHY */
        h1 {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(to right, #ea580c, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2px;
        }
        .subtitle { font-size: 11px; font-weight: 600; color: #94a3b8; letter-spacing: 0.05em; text-transform: uppercase; }

        /* 4. INPUTS */
        .input-group {
            background: #f8fafc;
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 12px 16px;
            transition: all 0.2s ease;
            margin-bottom: 12px;
        }
        .input-group:focus-within {
            background: #fff;
            border-color: #FF6B6B;
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.15);
        }
        .label { display: block; font-size: 10px; font-weight: 700; color: #94a3b8; text-transform: uppercase; margin-bottom: 4px; }
        .input-row { display: flex; align-items: baseline; }
        input {
            flex: 1;
            background: transparent;
            border: none;
            font-size: 28px;
            font-weight: 700;
            color: #334155;
            width: 100%;
            outline: none;
            font-family: inherit; /* Ensure numbers use the nice system font */
        }
        input::placeholder { color: #cbd5e1; }
        .unit { font-size: 18px; color: #cbd5e1; font-weight: 400; margin-left: 8px; }

        /* 5. ICONS & BUTTONS */
        .icon-btn {
            background: #f1f5f9;
            border: none;
            width: 32px; height: 32px;
            border-radius: 50%;
            color: #94a3b8;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: background 0.2s;
        }
        .icon-btn:active { background: #e2e8f0; }
        
        .divider {
            display: flex; justify-content: center; align-items: center;
            margin: -16px 0; position: relative; z-index: 10;
        }
        .divider-icon {
            background: white; color: #f97316;
            width: 36px; height: 36px;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex; align-items: center; justify-content: center;
        }

        .reset-btn {
            width: 100%;
            margin-top: 24px;
            padding: 14px;
            background: #f1f5f9;
            color: #64748b;
            border: none;
            border-radius: 14px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .reset-btn:active { background: #e2e8f0; transform: scale(0.98); }

        /* SVG Sizing */
        svg { width: 16px; height: 16px; fill: currentColor; }
        .divider-icon svg { width: 18px; height: 18px; }

        /* 6. MODAL */
        #modal {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(4px);
            z-index: 100;
            display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.2s;
        }
        #modal.open { display: flex; opacity: 1; }
        .modal-content {
            background: white; width: 85%; max-width: 300px;
            padding: 24px; border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.25);
            transform: scale(0.95); transition: transform 0.2s;
        }
        #modal.open .modal-content { transform: scale(1); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .modal-title { font-weight: 700; font-size: 16px; }
        .step { display: flex; gap: 12px; margin-bottom: 16px; font-size: 13px; color: #475569; line-height: 1.4; }
        .step-icon {
            min-width: 32px; height: 32px; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold;
        }
        .bg-blue { background: #dbeafe; color: #2563eb; }
        .bg-green { background: #dcfce7; color: #16a34a; }
        .btn-primary {
            width: 100%; padding: 12px; background: #0f172a; color: white;
            border: none; border-radius: 12px; font-weight: 600; cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="card">
        <!-- Header -->
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 24px;">
            <div>
                <h1>Energy</h1>
                <div class="subtitle">KJ <span style="margin:0 4px">⇄</span> Cal</div>
            </div>
            <button class="icon-btn" onclick="toggleModal(true)" aria-label="Help">
                <!-- Question Mark SVG -->
                <svg viewBox="0 0 384 512"><path d="M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.765-49.449 30.764 0 68.116 16.436 68.116 43.132 0 26.305-16.735 36.518-45.182 60.523-28.978 24.354-45.167 46.364-45.167 83.242 0 14.333 10.375 26.865 24.52 28.944l49.807 7.353c12.52 1.85 24.035-7.795 24.035-19.989 0-11.414 1.678-22.589 21.675-39.466 22.322-19.235 87.457-46.011 87.457-114.53 0-82.683-71.043-152.22-177.485-152.22zM182.204 384h43.14c17.069 0 31.079 14.009 31.079 31.08 0 17.069-14.01 31.079-31.079 31.079h-43.14c-17.069 0-31.079-14.01-31.079-31.079 0-17.071 14.01-31.08 31.079-31.08z"/></svg>
            </button>
        </div>

        <!-- Input 1 -->
        <div class="input-group">
            <label class="label">Kilojoules (kJ)</label>
            <div class="input-row">
                <input type="number" id="kj" placeholder="0" inputmode="decimal">
                <span class="unit">kJ</span>
            </div>
        </div>

        <!-- Divider Icon -->
        <div class="divider">
            <div class="divider-icon">
                <!-- Fire SVG -->
                <svg viewBox="0 0 384 512"><path d="M192 0C79.7 101.3 0 220.9 0 300.5 0 425 79 512 192 512s192-87 192-211.5c0-79.9-80.2-199.6-192-300.5zm0 448c-56.5 0-96-39-96-94.8 0-13.5 4.6-26.4 13.3-36.7 8.8-10.3 10.6-23.6 5.3-35.6-5.8-13.2-18-21.9-32.3-23.2-1.7-.1-3.4-.2-5.1-.2-5.1 0-10.2.3-15.3 1 30.6-56.1 76-92.4 129.2-89.9 22 1 42 7.3 59.8 17.6 15 8.7 18.7 27.7 8.3 40.8-10.5 13.2-4.9 32.5 11.4 39.5 15.6 6.8 28.3 17.7 36 31 10.4 17.8 15.6 37.9 15.6 58.6 0 52.2-43.1 91.9-130.2 91.9z"/></svg>
            </div>
        </div>

        <!-- Input 2 -->
        <div class="input-group">
            <label class="label">Calories (kcal)</label>
            <div class="input-row">
                <input type="number" id="cal" placeholder="0" inputmode="decimal">
                <span class="unit">Cal</span>
            </div>
        </div>

        <!-- Reset Button -->
        <button class="reset-btn" onclick="clearAll()">
            <!-- Rotate SVG -->
            <svg viewBox="0 0 512 512"><path d="M480 256c0 123.4-100.5 223.9-223.9 223.9-48.84 0-95.17-15.58-134.2-44.86-14.12-10.59-16.97-30.66-6.375-44.81 10.59-14.12 30.62-16.94 44.81-6.375 27.84 20.91 61 31.94 95.88 31.94C344.3 415.8 416 344.1 416 256s-71.69-159.8-159.8-159.8c-37.46 0-73.09 13.49-101.3 36.64l45.12 45.14c17.01 17.02 4.955 46.1-19.1 46.1H35.17c-8.844 0-16-7.156-16-16V62.98c0-24.06 29.08-36.12 46.09-19.11l45.13 45.14c45.33-37.29 101.3-56.91 160.8-56.91C379.5 32.1 480 132.6 480 256z"/></svg>
            Reset
        </button>
    </div>

    <!-- Help Modal -->
    <div id="modal" onclick="toggleModal(false)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">Install App</div>
                <button class="icon-btn" onclick="toggleModal(false)" style="width:24px;height:24px;">✕</button>
            </div>
            
            <div class="step">
                <div class="step-icon bg-blue">
                    <svg viewBox="0 0 384 512" style="width:14px;"><path d="M318.7 268.7c25.5-13.3 56.1-3.8 65.3 1.2-12.7 18.5-44.5 45.6-44.5 91.1 0 52.5 37.1 77.2 38.3 77.9-2.1 6.5-16.4 56.4-53.5 56.4-23.2 0-31.5-18.4-56.4-18.4-25.5 0-33.8 19-56.9 19-35.8 0-61.9-57-61.9-102.7 0-48.4 29.5-89.6 77.7-89.6 22.1 0 41.7 13.8 54.3 13.8 12.1 0 37.7-18.7 37.7-18.7zm-58.8-114c14.6-18.8 24.8-44.5 24.8-67.9 0-3.3-.2-6.9-.4-10.2-22.7 1-50.6 15.6-67.1 35.2-14.2 16.7-26.7 43.1-26.7 66.7 0 3.8.4 7.3.6 8.5 25.4 1.7 52.9-12.3 68.8-32.3z"/></svg>
                </div>
                <div>Tap <b>Share</b> <svg viewBox="0 0 512 512" style="width:10px;display:inline;vertical-align:middle;color:#2563eb"><path d="M448 320c-17.69 0-32 14.31-32 32v64c0 17.69-14.31 32-32 32H128c-17.69 0-32-14.31-32-32v-64c0-17.69-14.31-32-32-32s-32 14.31-32 32v64c0 53.02 42.98 96 96 96h256c53.02 0 96-42.98 96-96v-64c0-17.69-14.31-32-32-32zM224 48c0-17.69 14.31-32 32-32s32 14.31 32 32v208h-64V48zm0 0L256 0l32 48h-64zM256 224v-64l-80 80 80 80v-64h128V128H256v96z"/></svg> then "Add to Home Screen".</div>
            </div>
            
            <div class="step">
                <div class="step-icon bg-green">
                    <svg viewBox="0 0 576 512" style="width:16px;"><path d="M420.55,301.93a24,24,0,1,1,24-24,24,24,0,0,1-24,24m-165.1,0a24,24,0,1,1,24-24,24,24,0,0,1-24,24m107.55-220.47L388.9,26a14,14,0,0,0-23-14.56l-31.57,63.14A251.36,251.36,0,0,0,233.68,74.59L202.11,11.44a14,14,0,0,0-23,14.56l25.9,55.45C118.85,102.35,53,190.54,49.52,295H462.48C459,190.54,393.15,102.35,363,81.46M496,327V440a24,24,0,0,1-24,24H424a24,24,0,0,1-24-24V327H176V440a24,24,0,0,1-24,24H104a24,24,0,0,1-24-24V327H48a48,48,0,0,1,0-96H528a48,48,0,0,1,0,96Z"/></svg>
                </div>
                <div>Tap Menu <b>(⋮)</b> then "Add to Home Screen".</div>
            </div>

            <button class="btn-primary" onclick="toggleModal(false)">Got it</button>
        </div>
    </div>

    <script>
        // CORE LOGIC - Pure JS
        const kj = document.getElementById('kj');
        const cal = document.getElementById('cal');
        const FACTOR = 4.184;

        function update(e) {
            const val = parseFloat(e.target.value);
            if (isNaN(val)) {
                if(e.target === kj) cal.value = '';
                else kj.value = '';
                return;
            }
            if (e.target === kj) {
                cal.value = Math.round((val / FACTOR) * 100) / 100;
            } else {
                kj.value = Math.round((val * FACTOR) * 100) / 100;
            }
        }

        function clearAll() {
            kj.value = ''; cal.value = ''; kj.focus();
        }

        function toggleModal(show) {
            const m = document.getElementById('modal');
            if(show) {
                m.classList.add('open');
            } else {
                m.classList.remove('open');
            }
        }

        kj.addEventListener('input', update);
        cal.addEventListener('input', update);
    </script>
</body>
</html>